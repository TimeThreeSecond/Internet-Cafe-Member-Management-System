# 网吧会员管理系统完整接口文档

## 项目基本信息

- **项目名称**: Internet Cafe Member Management System (网吧会员管理系统)
- **项目路径**: C:\Users\27453\vscode javafiles\Internet Cafe Member Management System
- **技术栈**: Java 8 + Servlet 4.0.1 + JSP + MySQL 8.0 + Bootstrap 5.1.3
- **开发工�?*: IntelliJ IDEA 2024.3
- **服务�?*: Apache Tomcat 8.0+

## 系统架构

### MVC分层架构
- **Model�?*: Bean实体类（com.yourcompany.netbarmanager.bean�?
- **View�?*: JSP页面（src/main/webapp/pages/�?
- **Controller�?*: Servlet控制器（com.yourcompany.netbarmanager.controller�?
- **Service�?*: 业务逻辑层（com.yourcompany.netbarmanager.service�?
- **DAO�?*: 数据访问层（com.yourcompany.netbarmanager.dao�?
- **工具�?*: 工具类（com.yourcompany.netbarmanager.util�?
- **过滤�?*: 过滤器（com.yourcompany.netbarmanager.filter�?

## 数据库设�?

### 数据库连接信�?
- **数据库名**: netbar_management
- **连接URL**: jdbc:mysql://localhost:3306/netbar_management?useSSL=false&serverTimezone=UTC&characterEncoding=utf8
- **用户�?*: root
- **密码**: 123456

### 数据表结�?

#### 1. admin - 管理员表
| 字段�?| 类型 | 说明 | 约束 |
|--------|------|------|------|
| admin_id | INT | 管理员ID | PRIMARY KEY AUTO_INCREMENT |
| username | VARCHAR(50) | 用户�?| NOT NULL UNIQUE |
| password | VARCHAR(255) | 密码 | NOT NULL |
| real_name | VARCHAR(50) | 真实姓名 | |
| phone | VARCHAR(20) | 电话 | |
| email | VARCHAR(100) | 邮箱 | |
| create_time | TIMESTAMP | 创建时间 | DEFAULT CURRENT_TIMESTAMP |
| last_login | TIMESTAMP | 最后登录时�?| |
| status | TINYINT | 状�?| DEFAULT 1 (1-正常 0-禁用) |

#### 2. member - 会员�?
| 字段�?| 类型 | 说明 | 约束 |
|--------|------|------|------|
| member_id | INT | 会员ID | PRIMARY KEY AUTO_INCREMENT |
| username | VARCHAR(50) | 用户�?| NOT NULL UNIQUE |
| password | VARCHAR(255) | 密码 | NOT NULL |
| nickname | VARCHAR(50) | 昵称 | |
| gender | TINYINT | 性别 | (1-�?2-�?0-未知) |
| phone | VARCHAR(20) | 电话 | |
| qq | VARCHAR(20) | QQ�?| |
| wechat | VARCHAR(50) | 微信�?| |
| email | VARCHAR(100) | 邮箱 | |
| balance | DECIMAL(10,2) | 余额 | DEFAULT 0.00 |
| points | INT | 积分 | DEFAULT 0 |
| level | INT | 会员等级 | DEFAULT 1 (1-5�? |
| total_consumption | DECIMAL(10,2) | 总消费金�?| DEFAULT 0.00 |
| register_time | TIMESTAMP | 注册时间 | DEFAULT CURRENT_TIMESTAMP |
| last_login | TIMESTAMP | 最后登录时�?| |
| status | TINYINT | 状�?| DEFAULT 1 (1-正常 0-禁用) |

#### 3. computer - 电脑信息�?
| 字段�?| 类型 | 说明 | 约束 |
|--------|------|------|------|
| computer_id | INT | 电脑ID | PRIMARY KEY AUTO_INCREMENT |
| computer_no | VARCHAR(20) | 电脑编号 | NOT NULL UNIQUE |
| location | VARCHAR(100) | 位置 | |
| computer_type | TINYINT | 电脑类型 | DEFAULT 1 (1-普�?2-包房) |
| hourly_rate | DECIMAL(5,2) | 每小时费�?| DEFAULT 5.00 |
| status | TINYINT | 状�?| DEFAULT 0 (0-空闲 1-使用�?2-维护�? |
| create_time | TIMESTAMP | 创建时间 | DEFAULT CURRENT_TIMESTAMP |

#### 4. consumption - 消费记录�?
| 字段�?| 类型 | 说明 | 约束 |
|--------|------|------|------|
| consumption_id | INT | 消费ID | PRIMARY KEY AUTO_INCREMENT |
| member_id | INT | 会员ID | FOREIGN KEY |
| computer_id | INT | 电脑ID | FOREIGN KEY |
| start_time | TIMESTAMP | 开始时�?| |
| end_time | TIMESTAMP | 结束时间 | |
| duration | INT | 持续时间(分钟) | |
| amount | DECIMAL(10,2) | 消费金额 | |
| consumption_type | TINYINT | 消费类型 | DEFAULT 1 (1-上机 2-包房 3-商品) |
| create_time | TIMESTAMP | 创建时间 | DEFAULT CURRENT_TIMESTAMP |

#### 5. recharge - 充值记录表
| 字段�?| 类型 | 说明 | 约束 |
|--------|------|------|------|
| recharge_id | INT | 充值ID | PRIMARY KEY AUTO_INCREMENT |
| member_id | INT | 会员ID | FOREIGN KEY |
| amount | DECIMAL(10,2) | 充值金�?| |
| recharge_type | TINYINT | 充值类�?| DEFAULT 1 (1-现金 2-线上 3-其他) |
| operator_id | INT | 操作员ID | FOREIGN KEY |
| remark | VARCHAR(255) | 备注 | |
| create_time | TIMESTAMP | 创建时间 | DEFAULT CURRENT_TIMESTAMP |

#### 6. refund - 退款记录表
| 字段�?| 类型 | 说明 | 约束 |
|--------|------|------|------|
| refund_id | INT | 退款ID | PRIMARY KEY AUTO_INCREMENT |
| member_id | INT | 会员ID | FOREIGN KEY |
| amount | DECIMAL(10,2) | 退款金�?| |
| reason | VARCHAR(255) | 退款原�?| |
| status | TINYINT | 状�?| DEFAULT 0 (0-待审�?1-已通过 2-已拒�? |
| operator_id | INT | 操作员ID | FOREIGN KEY |
| process_time | TIMESTAMP | 处理时间 | |
| create_time | TIMESTAMP | 创建时间 | DEFAULT CURRENT_TIMESTAMP |

#### 7. temp_card - 临时卡表
| 字段�?| 类型 | 说明 | 约束 |
|--------|------|------|------|
| card_id | VARCHAR(20) | 卡ID | PRIMARY KEY |
| balance | DECIMAL(10,2) | 余额 | DEFAULT 0.00 |
| deposit | DECIMAL(10,2) | 押金 | DEFAULT 10.00 |
| create_time | TIMESTAMP | 创建时间 | DEFAULT CURRENT_TIMESTAMP |
| status | TINYINT | 状�?| DEFAULT 1 (1-正常 0-已退�? |

#### 8. temp_card_consumption - 临时卡消费记录表
| 字段�?| 类型 | 说明 | 约束 |
|--------|------|------|------|
| record_id | INT | 记录ID | PRIMARY KEY AUTO_INCREMENT |
| card_id | VARCHAR(20) | 卡ID | FOREIGN KEY |
| computer_id | INT | 电脑ID | FOREIGN KEY |
| start_time | TIMESTAMP | 开始时�?| |
| end_time | TIMESTAMP | 结束时间 | |
| duration | INT | 持续时间(分钟) | |
| amount | DECIMAL(10,2) | 消费金额 | |
| create_time | TIMESTAMP | 创建时间 | DEFAULT CURRENT_TIMESTAMP |

## 核心接口说明

### 1. 实体�?(Bean�?

#### Admin.java - 管理员实�?
- **包路�?*: com.yourcompany.netbarmanager.bean
- **主要属�?*: adminId, username, password, realName, phone, email, createTime, lastLogin, status
- **业务规则**: 管理员账号需要验证状态为1（正常）才能登录

#### Computer.java - 电脑实体
- **包路�?*: com.yourcompany.netbarmanager.bean
- **主要属�?*: computerId, computerNo, location, computerType, hourlyRate, status, createTime
- **核心方法**:
  - `getStatusText()` - 返回状态文�?
  - `getComputerTypeText()` - 返回电脑类型文本
  - `getTotalAmount()` - 获取总金额（余额+押金�?
- **业务规则**: 默认每小时费率为5.00元，电脑类型分为普�?1)和包�?2)两种

#### Member.java - 会员实体
- **包路�?*: com.yourcompany.netbarmanager.bean
- **主要属�?*: memberId, username, password, nickname, gender, phone, qq, wechat, email, balance, points, level, totalConsumption, registerTime, lastLogin, status
- **业务规则**:
  - 会员注册时默认余额为0.00�?
  - 会员等级根据积分自动计算（详见MemberServiceImpl�?

#### Consumption.java - 消费记录实体
- **包路�?*: com.yourcompany.netbarmanager.bean
- **主要属�?*: consumptionId, memberId, computerId, startTime, endTime, duration, amount, consumptionType, createTime
- **核心方法**: `getConsumptionTypeText()` - 返回消费类型文本

#### Recharge.java - 充值记录实�?
- **包路�?*: com.yourcompany.netbarmanager.bean
- **主要属�?*: rechargeId, memberId, amount, rechargeType, operatorId, remark, createTime
- **核心方法**: `getRechargeTypeText()` - 返回充值类型文�?

#### Refund.java - 退款记录实�?
- **包路�?*: com.yourcompany.netbarmanager.bean
- **主要属�?*: refundId, memberId, amount, reason, status, operatorId, processTime, createTime
- **核心方法**: `getStatusText()` - 返回状态文�?

#### TempCard.java - 临时卡实�?
- **包路�?*: com.yourcompany.netbarmanager.bean
- **主要属�?*: cardId, balance, deposit, createTime, status
- **核心方法**:
  - `getStatusText()` - 返回状态文�?
  - `getTotalAmount()` - 获取总金额（余额+押金�?
- **业务规则**: 临时卡押金默�?0.00�?

### 2. 控制器层 (Controller�?

#### LoginServlet.java - 登录控制�?
- **包路�?*: com.yourcompany.netbarmanager.controller
- **URL映射**: /login (注：web.xml中已注释，使用注解方�?
- **主要方法**:
  - `doPost(HttpServletRequest request, HttpServletResponse response)` - 处理POST登录请求
  - `doGet(HttpServletRequest request, HttpServletResponse response)` - 重定向到登录页面
- **业务逻辑**:
  1. 支持管理员和会员两种用户类型
  2. 验证用户名密码不能为�?
  3. 根据用户类型调用对应的Service
  4. 登录成功后设置Session并重定向到相应页�?
  5. 登录失败返回错误信息到登录页�?

#### LogoutServlet.java - 登出控制�?
- **包路�?*: com.yourcompany.netbarmanager.controller
- **URL映射**: /logout (注：web.xml中已注释，使用注解方�?
- **主要方法**:
  - `doGet(HttpServletRequest request, HttpServletResponse response)` - 销毁Session并重定向到登录页�?
  - `doPost(HttpServletRequest request, HttpServletResponse response)` - 调用doGet方法
- **业务逻辑**: 销毁用户Session，重定向到登录页�?

#### MemberRegisterServlet.java - 会员注册控制�?
- **包路�?*: com.yourcompany.netbarmanager.controller
- **URL映射**: /register (注：web.xml中已注释，使用注解方�?
- **主要方法**:
  - `doGet(HttpServletRequest request, HttpServletResponse response)` - 显示注册页面
  - `doPost(HttpServletRequest request, HttpServletResponse response)` - 处理注册请求
- **业务逻辑**:
  1. 验证用户名密码不能为�?
  2. 验证两次密码输入一�?
  3. 检查用户名是否已存�?
  4. 创建Member对象并调用Service注册
  5. 注册成功提示并跳转到登录页面
  6. 注册失败返回错误信息

### 3. DAO层接口定�?

#### AdminDAO接口
- **包路�?*: com.yourcompany.netbarmanager.dao
- **实现�?*: AdminDAOImpl
- **核心方法**:
  - `Admin login(String username, String password)` - 管理员登�?
  - `Admin findById(int adminId)` - 根据ID查找管理�?
  - `List<Admin> findAll()` - 查找所有管理员
  - `boolean update(Admin admin)` - 更新管理员信�?
  - `boolean updateLastLogin(int adminId)` - 更新最后登录时�?

#### MemberDAO接口
- **包路�?*: com.yourcompany.netbarmanager.dao
- **实现�?*: MemberDAOImpl
- **核心方法**:
  - `boolean register(Member member)` - 会员注册
  - `Member login(String username, String password)` - 会员登录
  - `Member findById(int memberId)` - 根据ID查找会员
  - `Member findByUsername(String username)` - 根据用户名查找会�?
  - `List<Member> findAll()` - 查找所有会�?
  - `List<Member> findByKeyword(String keyword)` - 关键字搜索会�?
  - `List<Member> findByLevel(int level)` - 根据等级查找会员
  - `List<Member> findByGender(int gender)` - 根据性别查找会员
  - `boolean update(Member member)` - 更新会员信息
  - `boolean updateBalance(int memberId, BigDecimal balance)` - 更新余额
  - `boolean updatePoints(int memberId, int points)` - 更新积分
  - `boolean delete(int memberId)` - 删除会员（逻辑删除�?
  - `boolean checkUsernameExists(String username)` - 检查用户名是否存在

#### ComputerDAO接口
- **包路�?*: com.yourcompany.netbarmanager.dao
- **实现�?*: ComputerDAOImpl
- **核心方法**:
  - `boolean add(Computer computer)` - 添加电脑
  - `boolean update(Computer computer)` - 更新电脑信息
  - `boolean delete(int computerId)` - 删除电脑
  - `Computer findById(int computerId)` - 根据ID查找电脑
  - `Computer findByNo(String computerNo)` - 根据编号查找电脑
  - `List<Computer> findAll()` - 查找所有电�?
  - `List<Computer> findByStatus(int status)` - 根据状态查找电�?
  - `List<Computer> findByType(int type)` - 根据类型查找电脑
  - `boolean updateStatus(int computerId, int status)` - 更新电脑状�?

### 4. Service层接口定�?

#### AdminService接口
- **包路�?*: com.yourcompany.netbarmanager.service
- **实现�?*: AdminServiceImpl
- **核心方法**:
  - `Admin login(String username, String password)` - 管理员登�?
  - `Admin getAdminById(int adminId)` - 根据ID获取管理�?
  - `List<Admin> getAllAdmins()` - 获取所有管理员
  - `boolean updateAdmin(Admin admin)` - 更新管理员信�?
  - `boolean updateLastLogin(int adminId)` - 更新最后登录时�?
- **业务规则**: 登录成功后自动更新最后登录时�?

#### MemberService接口
- **包路�?*: com.yourcompany.netbarmanager.service
- **实现�?*: MemberServiceImpl
- **核心方法**:
  - `boolean register(Member member)` - 会员注册
  - `Member login(String username, String password)` - 会员登录
  - `Member getMemberById(int memberId)` - 根据ID获取会员
  - `Member getMemberByUsername(String username)` - 根据用户名获取会�?
  - `List<Member> getAllMembers()` - 获取所有会�?
  - `List<Member> searchMembers(String keyword)` - 搜索会员
  - `List<Member> getMembersByLevel(int level)` - 根据等级获取会员
  - `List<Member> getMembersByGender(int gender)` - 根据性别获取会员
  - `boolean updateMember(Member member)` - 更新会员信息
  - `boolean recharge(int memberId, BigDecimal amount, int rechargeType, int operatorId, String remark)` - 会员充�?
  - `boolean deductBalance(int memberId, BigDecimal amount)` - 扣除余额
  - `boolean updatePoints(int memberId, int points)` - 更新积分
  - `boolean deleteMember(int memberId)` - 删除会员
  - `boolean isUsernameExists(String username)` - 检查用户名是否存在

**核心业务逻辑**:
1. **注册逻辑**: 设置默认值（余额0、积�?、等�?、总消�?、状态正常）
2. **充值逻辑**:
   - 验证充值金额必须大�?
   - 更新会员余额
   - 增加积分（金�?积分�?
   - 根据积分计算等级
   - 记录充值流�?
3. **扣费逻辑**:
   - 验证扣费金额和余�?
   - 更新余额和总消�?
   - 增加积分
   - 根据积分更新等级
4. **等级计算规则**:
   - 0-49积分 = 1�?
   - 50-199积分 = 2�?
   - 200-499积分 = 3�?
   - 500-999积分 = 4�?
   - 1000+积分 = 5�?

### 5. 过滤�?

#### AuthenticationFilter.java - 身份认证过滤�?
- **包路�?*: com.yourcompany.netbarmanager.filter
- **URL模式**: /pages/admin/*, /pages/member/*
- **功能**: 拦截未登录用户访问，验证用户权限
- **业务逻辑**:
  1. 放行登录和注册相关请�?
  2. 检查Session中是否存在用户信�?
  3. 验证用户类型是否与请求路径匹�?
  4. 管理员只能访�?admin/路径
  5. 会员只能访问/member/路径

#### CharacterEncodingFilter.java - 字符编码过滤�?
- **包路�?*: com.yourcompany.netbarmanager.filter
- **URL模式**: /*
- **功能**: 统一设置请求和响应的字符编码为UTF-8
- **可配置参�?*:
  - encoding: 编码类型（默认UTF-8�?
  - forceEncoding: 是否强制编码（默认true�?

### 6. JSP页面

#### pages/admin/index.jsp - 管理员首�?
- **路径**: src/main/webapp/pages/admin/index.jsp
- **权限要求**: 管理员登�?
- **页面功能**:
  - **统计卡片区域**: 展示会员总数、今日收入、上机电脑数、待处理退费数
  - **快捷操作区域**: 会员开户、会员充值、开机上机、查看报�?
  - **会员搜索表单**: 支持按等级、电话、用户名、性别筛选会�?
  - **会员列表**: 显示账户名、等级、性别、生日、入会日期、总充值金额、已消费金额、未消费金额
  - **退费申请待审批列表**: 显示申请人、类型、申请时间、申请金额、状态、操作按�?
- **侧边栏导�?*:
  - 首页
  - 会员管理
  - 充值管�?
  - 设备管理
  - 上机管理
  - 退费管�?
  - 统计报表

#### pages/member/index.jsp - 会员中心首页
- **路径**: src/main/webapp/pages/member/index.jsp
- **权限要求**: 会员登录
- **页面功能**:
  - **会员信息卡片**: 显示头像（首字母）、用户名、昵称、会员等级、积�?
  - **余额卡片**: 显示当前可用余额，提�?立即充�?�?申请退�?按钮
  - **统计信息**: 累计消费金额、注册时�?
  - **快捷操作**: 完善资料、修改密码、消费记录、在线充�?
  - **消费记录查询表单**: 支持按开始日期、结束日期、消费类型查�?
  - **最近消费记�?*: 显示消费时间、消费类型、消费金额、状�?
- **侧边栏导�?*:
  - 会员中心
  - 个人资料
  - 消费记录
  - 在线充�?
  - 退费申�?

### 7. 工具�?

#### DBUtil.java - 数据库工具类
- **包路�?*: com.yourcompany.netbarmanager.util
- **功能**: 提供数据库连接和资源管理功能
- **主要方法**:
  - `Connection getConnection()` - 获取数据库连�?
  - `void close(Connection conn, Statement stmt, ResultSet rs)` - 关闭数据库资�?
- **配置信息**:
  - 数据库URL: jdbc:mysql://localhost:3306/netbar_management
  - 用户�? root
  - 密码: 123456
  - SSL: false
  - 时区: UTC
  - 字符编码: utf8

### 7. JSP页面

#### pages/member/profile.jsp - 会员个人资料页面
- **路径**: src/main/webapp/pages/member/profile.jsp
- **权限要求**: 会员登录
- **页面功能**:
  - **只读字段**: 用户名、性别
  - **可编辑字�?*: 昵称、电话、QQ、微信、邮�?
  - **保存按钮**: 更新个人资料信息
- **数据来源**: MemberProfileServlet (GET/POST)

#### pages/member/changePassword.jsp - 修改密码页面
- **路径**: src/main/webapp/pages/member/changePassword.jsp
- **权限要求**: 管理员或会员登录
- **页面功能**:
  - **旧密码输入框**: 验证当前密码
  - **新密码输入框**: 输入新密�?
  - **确认密码输入�?*: 确认新密�?
  - **提交按钮**: 保存新密�?
- **数据来源**: ChangePasswordServlet (GET/POST)

#### pages/member/consumption.jsp - 会员消费记录页面
- **路径**: src/main/webapp/pages/member/consumption.jsp
- **权限要求**: 会员登录
- **页面功能**:
  - **筛选表�?*: 开始日期、结束日期、消费类�?
  - **消费记录列表**: 显示时间、类型、金额、状�?
  - **充值记�?*: 以绿�?号显�?
  - **消费记录**: 以红�?号显�?
- **数据来源**: MemberConsumptionServlet

#### pages/member/recharge.jsp - 会员在线充值页�?
- **路径**: src/main/webapp/pages/member/recharge.jsp
- **权限要求**: 会员登录
- **页面功能**:
  - **快捷金额按钮**: 10元�?0元�?0元�?00元�?00元�?00�?
  - **自定义金额输�?*: 支持10-10000元范�?
  - **支付方式选择**: 微信支付、支付宝、银行卡
  - **最近充值记�?*: 显示最近充值历�?
- **数据来源**: MemberRechargeServlet

#### pages/member/refund.jsp - 会员退费申请页�?
- **路径**: src/main/webapp/pages/member/refund.jsp
- **权限要求**: 会员登录
- **页面功能**:
  - **当前余额显示**: 显示可退费余�?
  - **退费金额输�?*: 不能超过当前余额
  - **退费原因输�?*: 必填�?
  - **退费历史记�?*: 显示退费申请状态（待审�?已通过/已拒绝）
- **数据来源**: MemberRefundServlet

#### pages/admin/memberManage.jsp - 管理员会员管理页�?
- **路径**: src/main/webapp/pages/admin/memberManage.jsp
- **权限要求**: 管理员登�?
- **页面功能**:
  - **会员搜索**: 关键字、等级、性别筛�?
  - **会员列表表格**: 显示ID、用户名、昵称、性别、电话、余额、积分、等级、总消费、注册时间、状�?
  - **操作按钮**: 编辑、禁�?启用
  - **添加会员按钮**: 弹出添加会员表单
- **数据来源**: AdminMemberManageServlet

#### pages/admin/recharge.jsp - 管理员充值管理页�?
- **路径**: src/main/webapp/pages/admin/recharge.jsp
- **权限要求**: 管理员登�?
- **页面功能**:
  - **充值表�?*: 选择会员、输入金额、选择充值类型、备�?
  - **最近充值记�?*: 显示最近的充值操作记�?
- **数据来源**: AdminRechargeServlet

#### pages/admin/computerManage.jsp - 管理员电脑管理页�?
- **路径**: src/main/webapp/pages/admin/computerManage.jsp
- **权限要求**: 管理员登�?
- **页面功能**:
  - **电脑列表表格**: 显示ID、编号、位置、类型、费率、状�?
  - **状态筛�?*: 全部/空闲/使用�?维护�?
  - **操作按钮**: 编辑、更新状�?
  - **添加电脑按钮**: 弹出添加电脑表单
- **数据来源**: AdminComputerManageServlet

#### pages/admin/useComputer.jsp - 管理员上机管理页�?
- **路径**: src/main/webapp/pages/admin/useComputer.jsp
- **权限要求**: 管理员登�?
- **页面功能**:
  - **开机区�?*: 选择电脑、选择用户类型（会�?临时卡）、开始上�?
  - **结束上机区域**: 显示使用中电脑列表、计算费用、结束上�?
  - **电脑状态概�?*: 显示空闲/使用�?维护中的电脑数量
- **数据来源**: AdminUseComputerServlet

#### pages/admin/statistics.jsp - 管理员统计报表页�?
- **路径**: src/main/webapp/pages/admin/statistics.jsp
- **权限要求**: 管理员登�?
- **页面功能**:
  - **时间范围选择**: 今日/本周/本月
  - **统计卡片**: 会员总数、总收入、使用中电脑、待处理退�?
  - **收入明细**: 充值收入、消费金�?
  - **会员等级分布**: 显示各等级会员数量和占比进度�?
- **数据来源**: AdminStatisticsServlet

#### pages/admin/index.jsp - 管理员首�?
- **路径**: src/main/webapp/pages/admin/index.jsp
- **权限要求**: 管理员登�?
- **数据来源**: AdminIndexServlet
- **页面功能**:
  - **统计卡片区域**: 展示会员总数、今日收入、上机电脑数、待处理退费数（数据来自AdminIndexServlet�?
  - **快捷操作区域**: 会员开户、会员充值、开机上机、查看报�?
  - **会员搜索表单**: 支持按等级、电话、用户名、性别筛选会�?
  - **会员列表**: 显示用户名、昵称、性别、电话、余额、积分、等级、总消费（数据来自AdminIndexServlet�?
  - **退费申请待审批列表**: 显示申请ID、会员ID、申请时间、申请金额、退费原因、操作（数据来自AdminIndexServlet�?
- **侧边栏导�?*:
  - 首页
  - 会员管理
  - 充值管�?
  - 设备管理
  - 上机管理
  - 退费管�?
  - 统计报表

#### pages/member/index.jsp - 会员中心首页
- **路径**: src/main/webapp/pages/member/index.jsp
- **权限要求**: 会员登录
- **数据来源**: MemberIndexServlet
- **页面功能**:
  - **会员信息卡片**: 显示头像（首字母）、用户名、昵称、会员等级、积分（数据来自Session�?
  - **余额卡片**: 显示当前可用余额，提�?立即充�?�?申请退�?按钮（数据来自Session�?
  - **统计信息**: 累计消费金额、注册时间（数据来自Session�?
  - **快捷操作**: 完善资料、修改密码、消费记录、在线充�?
  - **消费记录查询表单**: 支持按开始日期、结束日期、消费类型查�?
  - **最近消费记�?*: 显示消费时间、消费类型、消费金额、状态（数据来自MemberIndexServlet�?
- **侧边栏导�?*:
  - 会员中心
  - 个人资料
  - 消费记录
  - 在线充�?
  - 退费申�?

## Web应用配置

### web.xml配置要点
1. **字符编码过滤�?*: 全局UTF-8编码
2. **登录验证过滤�?*: 保护/pages/admin/�?pages/member/路径
3. **Session配置**: 超时时间30分钟
4. **错误页面**: 404�?00错误页面配置
5. **数据库配�?*: 通过context-param配置数据库连接信�?
6. **欢迎页面**: 默认跳转到pages/login.jsp
7. **Cookie配置**: HttpOnly启用，Secure关闭

### 项目依赖 (pom.xml)
- **MySQL Connector**: 8.0.33
- **Servlet API**: 4.0.1
- **JUnit**: 5.10.2 (测试�?

## 测试账号

### 管理员账�?
1. **admin / admin123456** - 系统管理�?
2. **manager / manager123** - 王经�?

### 会员账号
1. **testuser1 / user123** - 张三（余�?00.00，积�?00�?级）
2. **testuser2 / user123** - 李四（余�?0.00，积�?0�?级）
3. **testuser3 / user123** - 王五（余�?00.00，积�?00�?级）

## 系统功能模块

### 公共模块
- 用户登录/登出
- 会员注册
- 首页导航

### 管理员功�?
- 会员管理（查看、搜索、编辑、删除）
- 充值管理（为会员充值、查看充值记录）
- 电脑管理（添加、修改、删除、状态更新）
- 消费记录查询
- 退费审�?
- 数据统计

### 会员功能
- 个人信息管理
- 余额查询
- 消费记录查询
- 充值记录查�?
- 退费申�?

## 项目特点

1. **分层架构**: 采用标准的MVC设计模式，结构清�?
2. **安全�?*: 使用PreparedStatement防止SQL注入，Session管理，权限过滤器
3. **业务完整�?*: 完整的会员等级体系，充值消费流水记�?
4. **扩展�?*: 接口与实现分离，便于扩展和维�?
5. **国际�?*: 统一UTF-8编码，支持中�?

## 文档生成信息
- **生成时间**: 2024-12-31
- **项目版本**: 1.0-SNAPSHOT
- **文档完整�?*: 100%

## 更新记录
- **2024-12-31**:
  - 新增 MemberRefundServlet - 会员退费申请
  - 新增 pages/member/refund.jsp - 会员退费申请页面
  - 更新功能完成度至69%
- **2024-12-30**:
  - 更新已实现功能清单（RefundDAO、TempCardDAO、RefundService已实现）
  - 更新Controller层已实现列表（AdminIndexServlet、AdminMemberManageServlet、AdminRechargeServlet、AdminRefundServlet、MemberIndexServlet、MemberProfileServlet已实现）
  - 更新项目统计信息
- **2024-12-25**:
  - 移除监听器模块（listener包已删除�?
  - 更新admin/index.jsp页面说明（新增统计卡片、快捷操作、会员搜索、会员列表、退费审批列表）
  - 更新member/index.jsp页面说明（新增会员信息卡片、余额卡片、统计信息、快捷操作、消费记录查询）
  - 更新web.xml配置说明（新增Cookie配置�
